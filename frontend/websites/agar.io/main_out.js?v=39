(function(c,e){function ua(a,b){if(b){var d=new Date;d.setTime(d.getTime()+864E5*b);d="; expires="+d.toGMTString()}else d="";document.cookie="agario_redirect="+a+d+"; path=/"}function oc(){for(var a=document.cookie.split(";"),b=0;b<a.length;b++){for(var d=a[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf("agario_redirect="))return d.substring(16,d.length)}return null}function Eb(a){a.preventDefault();P*=Math.pow(.9,a.wheelDelta/-120||a.detail||0);1>P&&(P=1);P>4/l&&(P=4/l)}function pc(){if(.4>l)ia=null;else{for(var a=Number.POSITIVE_INFINITY,b=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,g=0;g<B.length;g++){var e=B[g];!e.R()||e.V||20>=e.size*l||(a=Math.min(e.x-e.size,a),b=Math.min(e.y-e.size,b),d=Math.max(e.x+e.size,d),c=Math.max(e.y+e.size,c))}ia=qc.init({za:a-10,Aa:b-10,xa:d+10,ya:c+10,Ha:2,Ia:4});for(g=0;g<B.length;g++)if(e=B[g],e.R()&&!(20>=e.size*l))for(a=0;a<e.a.length;++a)b=e.a[a].x,d=e.a[a].y,b<y-t/2/l||d<z-u/2/l||b>y+t/2/l||d>z+u/2/l||ia.ta(e.a[a])}}
function ab(){va=(X-t/2)/l+y;wa=(Y-u/2)/l+z}function Fb(){null==xa&&(xa={},e("#region").children().each(function(){var a=e(this),b=a.val();b&&(xa[b]=a.text())}));e.get(ya+"info",function(a){var b={},d;for(d in a.regions){var c=d.split(":")[0];b[c]=b[c]||0;b[c]+=a.regions[d].numPlayers}for(d in b)e('#region option[value="'+d+'"]').text(xa[d]+" ("+b[d]+" players)")},"json")}function Gb(){e("#adsBottom").hide();e("#overlays").hide();e("#stats").hide();e("#mainPanel").hide();Z=ja=!1;Hb();c.destroyAd(c.adSlots.aa);
c.destroyAd(c.adSlots.ac)}function za(a){a&&(a==F?e(".btn-needs-server").prop("disabled",!1):(e("#region").val()!=a&&e("#region").val(a),F=c.localStorage.location=a,e(".region-message").hide(),e(".region-message."+a).show(),e(".btn-needs-server").prop("disabled",!1),bb&&Q()))}function Aa(a){ja||Z||(Ba?e(".btn-spectate").prop("disabled",!0):e(".btn-spectate").prop("disabled",!1),M=null,cb||(e("#adsBottom").show(),e("#g300x250").hide(),e("#a300x250").show(),e("#g728x90").hide(),e("#a728x90").show()),c.refreshAd(cb?c.adSlots.ac:c.adSlots.aa),cb=!1,1E3>a&&(A=1),ja=!0,e("#mainPanel").show(),0<a?e("#overlays").fadeIn(a):e("#overlays").show())}function ka(a){e("#helloContainer").attr("data-gamemode",a);la=a;e("#gamemode").val(a)}function Hb(){e("#region").val()?c.localStorage.location=e("#region").val():c.localStorage.location&&e("#region").val(c.localStorage.location);e("#region").val()?e("#locationKnown").append(e("#region")):e("#locationUnknown").append(e("#region"))}function db(a){"env_local"in
EnvConfig?"true"==EnvConfig.load_local_configuration?c.MC.updateConfigurationID("base"):c.MC.updateConfigurationID(EnvConfig.configID):c.MC.updateConfigurationID(a)}function rc(){"configID"in C?db(C.configID):e.get(ya+"getLatestID",function(a){db(a);c.localStorage.last_config_id=a}).fail(function(){var a;if(a="last_config_id"in c.localStorage)a=c.localStorage.last_config_id,a=!(null==a||void 0==a||""===a);a&&(a=c.localStorage.last_config_id,console.log("Fallback to stored configID: "+a),db(a))})}
function sc(){e.get(eb+"//gc.agar.io",function(a){var b=a.split(" ");a=b[0];b=b[1]||"";-1==["UA"].indexOf(a)&&Ib.push("ussr");ma.hasOwnProperty(a)&&("string"==typeof ma[a]?F||za(ma[a]):ma[a].hasOwnProperty(b)&&(F||za(ma[a][b])))},"text")}function R(a){return c.i18n[a]||c.i18n_dict.en[a]||a}function Jb(){var a=++fb;console.log("Find "+F+la);Kb();e.ajax(ya+"findServer",{error:function(){console.log("Failed to get server. Will retry in 30 seconds");setTimeout(Jb,3E4)},success:function(b){if(a==fb){b.alert&&alert(b.alert);var d=b.ip;"game_server_port"in EnvConfig&&(d=c.location.hostname+":"+EnvConfig.game_server_port);gb("ws"+(hb?"s":"")+"://"+d,b.token)}},dataType:"json",method:"POST",cache:!1,crossDomain:!0,data:(F+la||"?")+"\n2200049715"})}function Q(){bb&&F&&(e("#connecting").show(),Jb())}function Kb(){if(w){w.onopen=null;w.onmessage=null;w.onclose=null;try{w.close()}catch(a){}w=null}}function gb(a,b){Kb();C.ip&&(a="ws"+(hb?"s":"")+"://"+C.ip);if(null!=S){var d=S;S=function(){d(b)}}if(hb&&!EnvConfig.env_development&&!EnvConfig.env_local){var c=a.split(":");a="wss://ip-"+c[1].replace(/\./g,"-").replace(/\//g,"")+".tech.agar.io:"+ +c[2]}G=[];q=[];N={};B=[];aa=[];D=[];H=I=null;T=0;na=!1;console.log("Connecting to "+a);m.cache.sentGameServerLogin=!1;w=new WebSocket(a);w.binaryType="arraybuffer";w.onopen=function(){var a;Ca=x=Date.now();oa=120;Da=0;console.log("socket open");a=U(5);a.setUint8(0,254);a.setUint32(1,5,!0);V(a);a=U(5);a.setUint8(0,255);a.setUint32(1,2200049715,!0);V(a);a=U(1+b.length);a.setUint8(0,80);for(var d=0;d<b.length;++d)a.setUint8(d+1,b.charCodeAt(d));V(a);m.core.proxy.onSocketOpen()};w.onmessage=tc;w.onclose=uc;w.onerror=function(){console.log(Ea.L()+" socket error",arguments)}}function U(a){return new DataView(new ArrayBuffer(a))}function V(a){w.send(a.buffer)}function uc(){na&&(Fa=500);m.core.proxy.onSocketClosed();console.log(Ea.L()+" socket close");setTimeout(Q,Fa);Fa*=2}function tc(a){vc(new DataView(a.data))}function vc(a){function b(){for(var b="";;){var c=a.getUint16(d,!0);d+=2;if(0==c)break;b+=String.fromCharCode(c)}return b}var d=0;240==a.getUint8(d)&&(d+=5);switch(a.getUint8(d++)){case 16:wc(a,d);break;case 17:pa=a.getFloat32(d,!0);d+=4;qa=a.getFloat32(d,!0);d+=4;ra=a.getFloat32(d,!0);d+=4;break;case 20:q=[];G=[];break;case 21:ib=a.getInt16(d,!0);d+=2;jb=a.getInt16(d,!0);d+=2;kb||(kb=!0,Ga=ib,Ha=jb);break;case 32:G.push(a.getUint32(d,!0));d+=4;break;case 49:if(null!=I)break;var r=a.getUint32(d,!0),d=d+4;D=[];for(var g=0;g<r;++g){var e=a.getUint32(d,!0),d=d+4;D.push({id:e,name:b()})}Lb();break;case 50:I=[];r=a.getUint32(d,!0);d+=4;for(g=0;g<r;++g)I.push(a.getFloat32(d,!0)),d+=4;Lb();break;case 64:Ia=a.getFloat64(d,!0);d+=8;Ja=a.getFloat64(d,!0);d+=8;Ka=a.getFloat64(d,!0);d+=8;La=a.getFloat64(d,!0);d+=8;pa=(Ka+Ia)/2;qa=(La+Ja)/2;ra=1;0==q.length&&(y=pa,z=qa,l=ra);a.byteLength>d&&(r=a.getUint32(d,!0),d+=4,lb=!!(r&1),mb=b(),c.MC.updateServerVersion(mb),console.log("Server version "+mb));break;case 102:r=a.buffer.slice(d);m.core.proxy.forwardProtoMessage(r);break;case 104:c.logout()}}
function wc(a,b){function d(){for(var d="";;){var c=a.getUint16(b,!0);b+=2;if(0==c)break;d+=String.fromCharCode(c)}return d}function r(){for(var d="";;){var c=a.getUint8(b++);if(0==c)break;d+=String.fromCharCode(c)}return d}x=Date.now();var g=x-Ca;Ca=x;oa=xc*oa+yc*g;Da=zc*Da+Ac*Math.abs(g-oa);m.core.debug&&(m.debug.updateChart("networkUpdate",x,g),m.debug.updateChart("rttMean",x,oa),m.debug.updateChart("rttSDev",x,Da));na||(na=!0,e("#connecting").hide(),Mb(),S&&(S(),S=null));nb=!1;g=a.getUint16(b,!0);b+=2;for(var p=0;p<g;++p){var K=N[a.getUint32(b,!0)],k=N[a.getUint32(b+4,!0)];b+=8;K&&k&&(k.ca(),k.s=k.x,k.u=k.y,k.o=k.size,k.na(K.x,K.y),k.g=k.size,k.U=x,Bc(K,k))}for(p=0;;){g=a.getUint32(b,!0);b+=4;if(0==g)break;++p;var ob,K=a.getInt32(b,!0);b+=4;k=a.getInt32(b,!0);b+=4;ob=a.getInt16(b,!0);b+=2;var n=a.getUint8(b++),f=a.getUint8(b++),h=a.getUint8(b++),f=Cc(n<<16|f<<8|h),h=a.getUint8(b++),l=!!(h&1),t=!!(h&16),u=null;h&2&&(b+=4+a.getUint32(b,!0));h&4&&(u=r());var v=d(),n=null;N.hasOwnProperty(g)?(n=N[g],n.T(),n.s=n.x,n.u=n.y,n.o=n.size,n.color=f):(n=new ba(g,K,k,ob,f,v),B.push(n),N[g]=n);n.c=l;n.h=t;n.na(K,k);n.g=ob;n.U=x;n.ea=h;u&&(n.C=u);v&&n.A(v);-1!=G.indexOf(g)&&-1==q.indexOf(n)&&(q.push(n),n.I=!0,1==q.length&&(n.ua=!0,y=n.x,z=n.y,Nb(),document.getElementById("overlays").style.display="none",E=[],pb=0,qb=q[0].color,Ba=!0,Na=Date.now(),W=rb=sb=0))}K=a.getUint32(b,!0);b+=4;for(p=0;p<K;p++)g=a.getUint32(b,!0),b+=4,n=N[g],null!=n&&n.ca();nb&&0==q.length&&0==c.MC.isUserLoggedIn()&&Ob()}function Oa(){if(ca()){var a=X-t/2,b=Y-u/2;64>a*a+b*b||.01>Math.abs(Pb-va)&&.01>Math.abs(Qb-wa)||(Pb=va,Qb=wa,a=U(13),a.setUint8(0,16),a.setInt32(1,va,!0),a.setInt32(5,wa,!0),a.setUint32(9,0,!0),V(a))}}function Mb(){if(ca()&&na&&null!=M){var a=U(1+2*M.length);a.setUint8(0,0);for(var b=0;b<M.length;++b)a.setUint16(1+2*b,M.charCodeAt(b),!0);V(a);M=null}}function tb(){Oa();da(17)}function Rb(){Oa();da(21)}function ca(){return null!=w&&w.readyState==w.OPEN}function da(a){if(ca()){var b=U(1);b.setUint8(0,a);V(b)}}function Sb(){t=1*c.innerWidth;u=1*c.innerHeight;ub.width=O.width=t;ub.height=O.height=u;var a=e("#helloContainer");a.css("transform","none");var b=a.height(),d=c.innerHeight;0!=b/2%2&&(b++,a.height(b));b>d/1.1?a.css("transform","translate(-50%, -50%) scale("+d/b/1.1+")"):a.css("transform","translate(-50%, -50%)");Tb()}function Ub(){var a;a=1*Math.max(u/1080,t/1920);return a*=P}function Dc(){if(0!=q.length){for(var a=0,b=0;b<q.length;b++)a+=q[b].size;l=(9*l+Math.pow(Math.min(64/a,1),.4)*Ub())/10}}function Tb(){var a,
b=Date.now();++Ec;Vb&&(++Pa,180<Pa&&(Pa=0));x=b;if(0<q.length){Dc();for(var d=a=0,c=0;c<q.length;c++)q[c].T(),a+=q[c].x/q.length,d+=q[c].y/q.length;pa=a;qa=d;ra=l;y=(y+a)/2;z=(z+d)/2}else y=(29*y+pa)/30,z=(29*z+qa)/30,l=(9*l+ra*Ub())/10;pc();ab();vb||f.clearRect(0,0,t,u);vb?(f.fillStyle=ea?"#111111":"#F2FBFF",f.globalAlpha=.05,f.fillRect(0,0,t,u),f.globalAlpha=1):Fc();B.sort(function(a,b){return a.size==b.size?a.id-b.id:a.size-b.size});f.save();f.translate(t/2,u/2);f.scale(l,l);f.translate(-y,-z);
for(c=0;c<aa.length;c++)aa[c].w(f);for(c=0;c<B.length;c++)B[c].w(f);if(kb){Ga=(3*Ga+ib)/4;Ha=(3*Ha+jb)/4;f.save();f.strokeStyle="#FFAAAA";f.lineWidth=10;f.lineCap="round";f.lineJoin="round";f.globalAlpha=.5;f.beginPath();for(c=0;c<q.length;c++)f.moveTo(q[c].x,q[c].y),f.lineTo(Ga,Ha);f.stroke();f.restore()}f.restore();H&&H.width&&f.drawImage(H,t-H.width-10,10);T=Math.max(T,Wb());0!=T&&(null==Qa&&(Qa=new Ra(24,"#FFFFFF")),Qa.B(R("score")+": "+~~(T/100)),d=Qa.O(),a=d.width,f.globalAlpha=.2,f.fillStyle=
"#000000",f.fillRect(10,u-10-24-10,a+10,34),f.globalAlpha=1,f.drawImage(d,15,u-10-24-5));Gc();b=Date.now()-b;b>1E3/60?L-=.01:b<1E3/65&&(L+=.01);.4>L&&(L=.4);1<L&&(L=1);b=x-Xb;!ca()||ja||Z?(A+=b/2E3,1<A&&(A=1)):(A-=b/300,0>A&&(A=0));0<A?(f.fillStyle="#000000",Yb?(f.globalAlpha=A,f.fillRect(0,0,t,u),J.complete&&J.width&&(J.width/J.height<t/u?(b=t,a=J.height*t/J.width):(b=J.width*u/J.height,a=u),f.drawImage(J,(t-b)/2,(u-a)/2,b,a),f.globalAlpha=.5*A,f.fillRect(0,0,t,u))):(f.globalAlpha=.5*A,f.fillRect(0,
0,t,u)),f.globalAlpha=1):Yb=!1;Xb=x}function Fc(){f.fillStyle=ea?"#111111":"#F2FBFF";f.fillRect(0,0,t,u);f.save();f.strokeStyle=ea?"#AAAAAA":"#000000";f.globalAlpha=.2*l;for(var a=t/l,b=u/l,d=(-y+a/2)%50;d<a;d+=50)f.beginPath(),f.moveTo(d*l-.5,0),f.lineTo(d*l-.5,b*l),f.stroke();for(d=(-z+b/2)%50;d<b;d+=50)f.beginPath(),f.moveTo(0,d*l-.5),f.lineTo(a*l,d*l-.5),f.stroke();f.restore()}function Gc(){if(Zb&&wb.width){var a=t/5;f.drawImage(wb,5,5,a,a)}}function Wb(){for(var a=0,b=0;b<q.length;b++)a+=q[b].g*q[b].g;return a}function Lb(){H=null;if(null!=I||0!=D.length)if(null!=I||fa){H=document.createElement("canvas");var a=H.getContext("2d"),b=60,b=null==I?b+24*D.length:b+180,d=Math.min(200,.3*t)/200;H.width=200*d;H.height=b*d;a.scale(d,d);a.globalAlpha=.4;a.fillStyle="#000000";a.fillRect(0,0,200,b);a.globalAlpha=1;a.fillStyle="#FFFFFF";d=null;d=R("leaderboard");a.font="30px Ubuntu";a.fillText(d,100-a.measureText(d).width/2,40);var c,g;if(null==I)for(a.font="20px Ubuntu",b=0;b<D.length;++b)d=D[b].name||
R("unnamed_cell"),fa||(d=R("unnamed_cell")),-1!=G.indexOf(D[b].id)?(q[0].name&&(d=q[0].name),a.fillStyle="#FFAAAA"):a.fillStyle="#FFFFFF",d=b+1+". "+d,g=a.measureText(d).width,c=70+24*b,200<g?a.fillText(d,10,c):a.fillText(d,(200-g)/2,c);else for(b=d=0;b<I.length;++b)c=d+I[b]*Math.PI*2,a.fillStyle=Hc[b+1],a.beginPath(),a.moveTo(100,140),a.arc(100,140,80,d,c,!1),a.fill(),d=c}}function Ic(a){if(null==a||0==a.length)return null;if("%"==a[0]){if(!c.MC||!c.MC.getSkinInfo)return null;a=c.MC.getSkinInfo("skin_"+
a.slice(1));if(null==a)return null;for(a=(+a.color).toString(16);6>a.length;)a="0"+a;return"#"+a}return null}function $b(a){if(null==a||0==a.length)return null;if(!sa.hasOwnProperty(a)){var b=new Image;if(":"==a[0])b.src=a.slice(1);else if("%"==a[0]){if(!c.MC||!c.MC.getSkinInfo)return null;var d=c.MC.getSkinInfo("skin_"+a.slice(1));if(null==d)return null;b.src=c.ASSETS_ROOT+"skins/premium/"+d.url}sa[a]=b}return 0!=sa[a].width&&sa[a].complete?sa[a]:null}function xb(a,b,d,c,g){this.$=a;this.x=b;this.y=d;this.f=c;this.b=g}function ba(a,b,d,c,g,e){this.id=a;this.s=this.x=this.M=this.J=b;this.u=this.y=this.N=this.K=d;this.o=this.size=c;this.color=g;this.a=[];this.ba();this.A(e)}function Cc(a){for(a=a.toString(16);6>a.length;)a="0"+a;return"#"+a}function Ra(a,b,d,c){a&&(this.v=a);b&&(this.W=b);this.Y=!!d;c&&(this.Z=c)}function Jc(a){for(var b=a.length,d,c;0<b;)c=Math.floor(Math.random()*b),b--,d=a[b],a[b]=a[c],a[c]=d}function Kc(){h=Sa}function ac(a){h.context="google"==a?"google":"facebook";Ta()}
function Ta(){c.localStorage.storeObjectInfo=JSON.stringify(h);h=JSON.parse(c.localStorage.storeObjectInfo);c.storageInfo=h;"google"==h.context?(e("#gPlusShare").show(),e("#fbShare").hide()):(e("#gPlusShare").hide(),e("#fbShare").show())}function bc(a){e("#helloContainer").attr("data-has-account-data");""!=a.displayName&&(a.name=a.displayName);if(null==a.name||void 0==a.name)a.name="";var b=a.name.lastIndexOf("_");-1!=b&&(a.name=a.name.substring(0,b));e("#helloContainer").attr("data-has-account-data","1");e("#helloContainer").attr("data-logged-in","1");e(".agario-profile-panel .progress-bar-star").text(a.level);e(".agario-exp-bar .progress-bar-text").text(a.xp+"/"+a.xpNeeded+" XP");e(".agario-exp-bar .progress-bar").css("width",(88*a.xp/a.xpNeeded).toFixed(2)+"%");e(".agario-profile-name").text(a.name);""!=a.picture&&e(".agario-profile-picture").attr("src",a.picture);yb();h.userInfo.level=a.level;h.userInfo.xp=a.xp;h.userInfo.xpNeeded=a.xpNeeded;h.userInfo.displayName=a.name;h.userInfo.loggedIn="1";c.updateStorage()}function ga(a,b){var d=a;if(h.userInfo.loggedIn){var r=e("#helloContainer").is(":visible")&&"1"==e("#helloContainer").attr("data-has-account-data");if(null==d||void 0==d)d=h.userInfo;if(r){var g=+e(".agario-exp-bar .progress-bar-text").first().text().split("/")[0],r=+e(".agario-exp-bar .progress-bar-text").first().text().split("/")[1].split(" ")[0],p=e(".agario-profile-panel .progress-bar-star").first().text();if(p!=d.level)ga({xp:r,xpNeeded:r,level:p},function(){e(".agario-profile-panel .progress-bar-star").text(d.level);e(".agario-exp-bar .progress-bar").css("width","100%");e(".progress-bar-star").addClass("animated tada").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e(".progress-bar-star").removeClass("animated tada")});setTimeout(function(){e(".agario-exp-bar .progress-bar-text").text(d.xpNeeded+"/"+d.xpNeeded+" XP");ga({xp:0,xpNeeded:d.xpNeeded,level:d.level},function(){ga(d)})},1E3)});else{var f=Date.now(),k=function(){var a;a=(Date.now()-f)/1E3;a=0>a?0:1<a?1:
a;a=a*a*(3-2*a);e(".agario-exp-bar .progress-bar-text").text(~~(g+(d.xp-g)*a)+"/"+d.xpNeeded+" XP");e(".agario-exp-bar .progress-bar").css("width",(88*(g+(d.xp-g)*a)/d.xpNeeded).toFixed(2)+"%");b&&b();1>a&&c.requestAnimationFrame(k)};c.requestAnimationFrame(k)}}}}function yb(){var a;("undefined"!==typeof a&&a||"none"==e("#settings").css("display")&&"none"==e("#socialLoginContainer").css("display"))&&e("#instructions").show()}function cc(a){if("connected"==a.status){var b=a.authResponse.accessToken;
null==b||"undefined"==b||""==b?(3>dc&&(dc++,c.facebookRelogin()),c.logout()):(c.MC.doLoginWithFB(b),m.cache.login_info=[b,"facebook"],c.FB.api("/me/picture?width=180&height=180",function(b){h.userInfo.picture=b.data.url;c.updateStorage();e(".agario-profile-picture").attr("src",b.data.url);h.userInfo.socialId=a.authResponse.userID;Ua()}),e("#helloContainer").attr("data-logged-in","1"),h.context="facebook",h.loginIntent="1",c.updateStorage())}}function ec(a){ka(":party");e("#helloContainer").attr("data-party-state","4");a=decodeURIComponent(a).replace(/.*#/gim,"");zb("#"+c.encodeURIComponent(a));e.ajax(ya+"getToken",{error:function(){e("#helloContainer").attr("data-party-state","6")},success:function(b){b=b.split("\n");e(".partyToken").val("agar.io/#"+c.encodeURIComponent(a));e("#helloContainer").attr("data-party-state","5");ka(":party");gb("ws://"+b[0],a)},dataType:"text",method:"POST",cache:!1,crossDomain:!0,data:a})}function zb(a){c.history&&c.history.replaceState&&c.history.replaceState({},c.document.title,a)}function Ob(){null==c.storageInfo&&c.createDefaultStorage();Ab=Date.now();0>=Na&&(Na=Ab);Ba=!1;Lc()}function Bc(a,b){var d=-1!=G.indexOf(a.id),c=-1!=G.indexOf(b.id),e=30>b.size;d&&e&&++pb;e||!d||c||b.ea&32||++rb}function fc(a){a=~~a;var b=(a%60).toString();a=(~~(a/60)).toString();2>b.length&&(b="0"+b);return a+":"+b}function Mc(){if(null==D)return 0;for(var a=0;a<D.length;++a)if(-1!=G.indexOf(D[a].id))return a+1;return 0}function Nc(){e(".stats-food-eaten").text(pb);e(".stats-time-alive").text(fc((Ab-
Na)/1E3));e(".stats-leaderboard-time").text(fc(sb));e(".stats-highest-mass").text(~~(T/100));e(".stats-cells-eaten").text(rb);e(".stats-top-position").text(0==W?":(":W);var a=document.getElementById("statsGraph");if(a){var b=a.getContext("2d"),d=a.width,a=a.height;b.clearRect(0,0,d,a);if(2<E.length){for(var c=200,g=0;g<E.length;g++)c=Math.max(E[g],c);b.lineWidth=3;b.lineCap="round";b.lineJoin="round";b.strokeStyle=qb;b.fillStyle=qb;b.beginPath();b.moveTo(0,a-E[0]/c*(a-10)+10);for(g=1;g<E.length;g+=
Math.max(~~(E.length/d),1)){for(var p=g/(E.length-1)*d,f=[],k=-20;20>=k;++k)0>g+k||g+k>=E.length||f.push(E[g+k]);f=f.reduce(function(a,b){return a+b})/f.length/c;b.lineTo(p,a-f*(a-10)+10)}b.stroke();b.globalAlpha=.5;b.lineTo(d,a);b.lineTo(0,a);b.fill();b.globalAlpha=1}}}function Lc(){ja||Z||(Va?(c.refreshAd(c.adSlots.ab),Nc(),Z=!0,setTimeout(function(){e("#overlays").fadeIn(500,function(){ga()});e("#stats").show();var a=gc("g_plus_share_stats");c.fillSocialValues(a,"gPlusShare")},1500)):Aa(500))}
function gc(a){var b=e(".stats-time-alive").text();return c.parseString(a,"%@",[b.split(":")[0],b.split(":")[1],e(".stats-highest-mass").text()])}function Oc(){c.open("https://plus.google.com/share?url=www.agar.io&hl=en-US","Agar.io","width=484,height=580,menubar=no,toolbar=no,resizable=yes,scrollbars=no,left="+(c.screenX+c.innerWidth/2-242)+",top="+(c.innerHeight-580)/2)}var hc=document.createElement("canvas");if("undefined"==typeof console||"undefined"==typeof DataView||"undefined"==typeof WebSocket||
null==hc||null==hc.getContext||null==c.localStorage)alert("You browser does not support this game, we recommend you to use Firefox to play this");else{var C={};(function(){var a=c.location.search;"?"==a.charAt(0)&&(a=a.slice(1));for(var a=a.split("&"),b=0;b<a.length;b++){var d=a[b].split("=");C[d[0]]=d[1]}})();c.queryString=C;var ic="fb"in C,Pc="miniclip"in C,v={skinsEnabled:"0",namesEnabled:"0",noColors:"0",blackTheme:"0",showMass:"0",statsEnabled:"0"},Qc=function(){ua("",-1)},jc="http:"!=c.location.protocol,Rc="1"==oc(),kc=!1;ic||Pc||(jc&&!Rc?(console.log("redirecting"),ua("1",1),c.location.href="http:"+c.location.href.substring(c.location.protocol.length),kc=!0):ua("",-1));jc||ua("",-1);kc||setTimeout(Qc,3E3);if(!c.agarioNoInit){var eb=c.location.protocol,hb="https:"==eb;C.master&&(EnvConfig.master_url=C.master);var ya=eb+"//"+EnvConfig.master_url+"/",Wa=c.navigator.userAgent;if(-1!=Wa.indexOf("Android"))c.ga&&c.ga("send","event","MobileRedirect","PlayStore"),setTimeout(function(){c.location.href="https://play.google.com/store/apps/details?id=com.miniclip.agar.io"},1E3);else if(-1!=Wa.indexOf("iPhone")||-1!=Wa.indexOf("iPad")||-1!=Wa.indexOf("iPod"))c.ga&&c.ga("send","event","MobileRedirect","AppStore"),setTimeout(function(){c.location.href="https://itunes.apple.com/app/agar.io/id995999703?mt=8&at=1l3vajp"},1E3);else{var m={};c.agarApp=m;var ub,f,O,t,u,ia=null,w=null,y=0,z=0,G=[],q=[],N={},B=[],aa=[],D=[],X=0,Y=0,va=-1,wa=-1,Ec=0,x=0,Xb=0,M=null,Ia=0,Ja=0,Ka=1E4,La=1E4,l=1,F=null,Xa=!0,fa=!0,ta=!1,nb=!1,T=0,ea=!1,Ya=!1,pa=y=~~((Ia+Ka)/2),qa=z=~~((Ja+La)/2),
ra=1,la="",I=null,bb=!1,kb=!1,ib=0,jb=0,Ga=0,Ha=0,Hc=["#333333","#FF3333","#33FF33","#3333FF"],vb=!1,na=!1,Ca=0,P=1,A=1,ja=!1,fb=0,Yb=!0,mb=null,lb=!1,J=new Image;J.src="/img/background.png";var Zb="ontouchstart"in c&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(c.navigator.userAgent),wb=new Image;wb.src="/img/split.png";var Za=!1,Bb,Cb;"gamepad"in C&&setInterval(function(){Za&&(X=$a.ha(X,Bb),Y=$a.ha(Y,Cb))},25);c.gamepadAxisUpdate=function(a,b){var d=.1>b*b;0==a&&(d?Bb=t/
2:(Bb=(b+1)/2*t,Za=!0));1==a&&(d?Cb=u/2:(Cb=(b+1)/2*u,Za=!0))};c.agarioInit=function(){bb=!0;sc();rc();m.core.init();null!=c.localStorage.settings&&(v=JSON.parse(c.localStorage.settings),Ya=v.showMass,ea=v.blackTheme,fa=v.namesEnabled,ta=v.noColors,Va=v.statsEnabled,Xa=v.skinsEnabled);e("#showMass").prop("checked",v.showMass);e("#noSkins").prop("checked",!v.skinsEnabled);e("#skipStats").prop("checked",!v.statsEnabled);e("#noColors").prop("checked",v.noColors);e("#noNames").prop("checked",!v.namesEnabled);
e("#darkTheme").prop("checked",v.blackTheme);Fb();setInterval(Fb,18E4);O=ub=document.getElementById("canvas");if(null!=O){f=O.getContext("2d");O.onmousedown=function(a){if(Zb){var b=a.clientX-(5+t/5/2),d=a.clientY-(5+t/5/2);if(Math.sqrt(b*b+d*d)<=t/5/2){tb();return}}X=1*a.clientX;Y=1*a.clientY;ab();Oa()};O.onmousemove=function(a){Za=!1;X=1*a.clientX;Y=1*a.clientY;ab()};O.onmouseup=function(){};/firefox/i.test(navigator.userAgent)?document.addEventListener("DOMMouseScroll",Eb,!1):document.body.onmousewheel=Eb;var a=!1,b=!1,d=!1;c.onkeydown=function(r){32!=r.keyCode||a||("nick"!=r.target.id&&r.preventDefault(),tb(),a=!0);81!=r.keyCode||b||(da(18),b=!0);87!=r.keyCode||d||(Rb(),d=!0);27==r.keyCode&&(r.preventDefault(),Aa(300),e("#oferwallContainer").is(":visible")&&c.closeOfferwall(),e("#videoContainer").is(":visible")&&c.closeVideoContainer())};c.onkeyup=function(c){32==c.keyCode&&(a=!1);87==c.keyCode&&(d=!1);81==c.keyCode&&b&&(da(19),b=!1)};c.onblur=function(){da(19);d=b=a=!1};c.onresize=Sb;c.requestAnimationFrame(lc);setInterval(Oa,40);F&&e("#region").val(F);Hb();za(e("#region").val());0==fb&&F&&Q();Aa(0);Sb();c.location.hash&&6<=c.location.hash.length&&ec(c.location.hash)}};var xa=null;c.setNick=function(a){c.ga&&c.ga("send","event","Nick",a.toLowerCase());Gb();M=a;Mb();T=0;v.skinsEnabled=Xa;v.namesEnabled=fa;v.noColors=ta;v.blackTheme=ea;v.showMass=Ya;v.statsEnabled=Va;c.localStorage.settings=JSON.stringify(v)};c.setSkins=function(a){Xa=a};c.setNames=function(a){fa=a};c.setDarkTheme=function(a){ea=a};c.setColors=function(a){ta=a};c.setShowMass=function(a){Ya=a};c.spectate=function(){M=null;da(1);Gb()};c.setRegion=za;var cb=!0;c.setGameMode=function(a){a!=la&&(":party"==la&&e("#helloContainer").attr("data-party-state","0"),ka(a),":party"!=a&&Q())};c.setAcid=function(a){vb=a};var Sc=function(a){var b={},d=!1,r={skipDraw:!0,predictionModifier:1.1};a.init=function(){m.account.init();m.google.va();m.fa.init();(d="debug"in c.queryString)&&m.debug.showDebug()};a.bind=function(a,d){e(b).bind(a,d)};a.unbind=function(a,d){e(b).unbind(a,d)};a.trigger=function(a,d){e(b).trigger(a,d)};a.__defineGetter__("debug",function(){return d});a.__defineSetter__("debug",function(a){return d=a});a.__defineGetter__("proxy",function(){return c.MC});a.__defineGetter__("config",function(){return r});return a}({});m.core=Sc;m.cache={};var Tc=function(a){function b(a,b,d,c){a=a+"Canvas";var g=e("<canvas>",{id:a});p.append(g);d=new SmoothieChart(d);for(g=0;g<b.length;g++){var r=b[g],f=_.extend(h,c[g]);d.addTimeSeries(r,f)}d.streamTo(document.getElementById(a),0)}function d(a,d){k[a]=c();b(a,[k[a]],d,[{strokeStyle:"rgba(0, 255, 0, 1)",fillStyle:"rgba(0, 255, 0, 0.2)",lineWidth:2}])}function c(){return new TimeSeries({Ka:!1})}var g=!1,p,f=!1,k={},h={strokeStyle:"rgba(0, 255, 0, 1)",fillStyle:"rgba(0, 255, 0, 0.2)",lineWidth:2};a.showDebug=function(){g||(p=e("#debug-overlay"),d("networkUpdate",{name:"network updates",minValue:0,maxValue:120}),d("fps",{name:"fps",minValue:0,maxValue:120}),k.rttSDev=c(),k.rttMean=c(),b("rttMean",[k.rttSDev,k.rttMean],{name:"rtt",minValue:0,maxValue:120},[{strokeStyle:"rgba(255, 0, 0, 1)",fillStyle:"rgba(0, 255, 0, 0.2)",lineWidth:2},{strokeStyle:"rgba(0, 255, 0, 1)",fillStyle:"rgba(0, 255, 0, 0)",lineWidth:2}]),g=!0);m.core.debug=!0;p.show()};a.hideDebug=function(){p.hide();m.core.debug=!1};a.updateChart=function(a,b,d){g&&a in k&&k[a].append(b,d)};a.__defineGetter__("showPrediction",function(){return f});a.__defineSetter__("showPrediction",function(a){return f=a});return a}({});m.debug=Tc;var ma={AF:"JP-Tokyo",AX:"EU-London",AL:"EU-London",DZ:"EU-London",AS:"SG-Singapore",AD:"EU-London",AO:"EU-London",AI:"US-Atlanta",AG:"US-Atlanta",AR:"BR-Brazil",AM:"JP-Tokyo",AW:"US-Atlanta",AU:"SG-Singapore",AT:"EU-London",AZ:"JP-Tokyo",BS:"US-Atlanta",BH:"JP-Tokyo",BD:"JP-Tokyo",BB:"US-Atlanta",BY:"EU-London",BE:"EU-London",BZ:"US-Atlanta",BJ:"EU-London",BM:"US-Atlanta",BT:"JP-Tokyo",BO:"BR-Brazil",BQ:"US-Atlanta",BA:"EU-London",BW:"EU-London",BR:"BR-Brazil",IO:"JP-Tokyo",VG:"US-Atlanta",BN:"JP-Tokyo",BG:"EU-London",BF:"EU-London",BI:"EU-London",KH:"JP-Tokyo",CM:"EU-London",CA:"US-Atlanta",CV:"EU-London",KY:"US-Atlanta",CF:"EU-London",TD:"EU-London",CL:"BR-Brazil",CN:"CN-China",CX:"JP-Tokyo",CC:"JP-Tokyo",CO:"BR-Brazil",KM:"EU-London",CD:"EU-London",CG:"EU-London",CK:"SG-Singapore",CR:"US-Atlanta",CI:"EU-London",HR:"EU-London",CU:"US-Atlanta",CW:"US-Atlanta",CY:"JP-Tokyo",CZ:"EU-London",DK:"EU-London",DJ:"EU-London",DM:"US-Atlanta",DO:"US-Atlanta",EC:"BR-Brazil",EG:"EU-London",SV:"US-Atlanta",GQ:"EU-London",ER:"EU-London",EE:"EU-London",ET:"EU-London",FO:"EU-London",FK:"BR-Brazil",FJ:"SG-Singapore",FI:"EU-London",FR:"EU-London",GF:"BR-Brazil",PF:"SG-Singapore",GA:"EU-London",GM:"EU-London",GE:"JP-Tokyo",DE:"EU-London",GH:"EU-London",GI:"EU-London",GR:"EU-London",GL:"US-Atlanta",GD:"US-Atlanta",GP:"US-Atlanta",GU:"SG-Singapore",GT:"US-Atlanta",GG:"EU-London",GN:"EU-London",GW:"EU-London",GY:"BR-Brazil",HT:"US-Atlanta",VA:"EU-London",HN:"US-Atlanta",HK:"JP-Tokyo",HU:"EU-London",IS:"EU-London",IN:"JP-Tokyo",ID:"JP-Tokyo",IR:"JP-Tokyo",IQ:"JP-Tokyo",IE:"EU-London",IM:"EU-London",IL:"JP-Tokyo",IT:"EU-London",JM:"US-Atlanta",JP:"JP-Tokyo",JE:"EU-London",JO:"JP-Tokyo",KZ:"JP-Tokyo",KE:"EU-London",KI:"SG-Singapore",KP:"JP-Tokyo",KR:"JP-Tokyo",KW:"JP-Tokyo",KG:"JP-Tokyo",LA:"JP-Tokyo",LV:"EU-London",LB:"JP-Tokyo",LS:"EU-London",LR:"EU-London",LY:"EU-London",LI:"EU-London",LT:"EU-London",LU:"EU-London",MO:"JP-Tokyo",MK:"EU-London",MG:"EU-London",MW:"EU-London",MY:"JP-Tokyo",MV:"JP-Tokyo",ML:"EU-London",MT:"EU-London",MH:"SG-Singapore",MQ:"US-Atlanta",MR:"EU-London",MU:"EU-London",YT:"EU-London",MX:"US-Atlanta",FM:"SG-Singapore",MD:"EU-London",MC:"EU-London",MN:"JP-Tokyo",ME:"EU-London",MS:"US-Atlanta",MA:"EU-London",MZ:"EU-London",MM:"JP-Tokyo",NA:"EU-London",NR:"SG-Singapore",NP:"JP-Tokyo",NL:"EU-London",NC:"SG-Singapore",NZ:"SG-Singapore",NI:"US-Atlanta",NE:"EU-London",NG:"EU-London",NU:"SG-Singapore",NF:"SG-Singapore",MP:"SG-Singapore",NO:"EU-London",OM:"JP-Tokyo",PK:"JP-Tokyo",PW:"SG-Singapore",PS:"JP-Tokyo",PA:"US-Atlanta",PG:"SG-Singapore",PY:"BR-Brazil",PE:"BR-Brazil",PH:"JP-Tokyo",PN:"SG-Singapore",PL:"EU-London",PT:"EU-London",PR:"US-Atlanta",QA:"JP-Tokyo",RE:"EU-London",RO:"EU-London",RU:"RU-Russia",RW:"EU-London",BL:"US-Atlanta",SH:"EU-London",KN:"US-Atlanta",LC:"US-Atlanta",MF:"US-Atlanta",PM:"US-Atlanta",VC:"US-Atlanta",WS:"SG-Singapore",SM:"EU-London",ST:"EU-London",SA:"EU-London",SN:"EU-London",RS:"EU-London",SC:"EU-London",SL:"EU-London",SG:"JP-Tokyo",SX:"US-Atlanta",SK:"EU-London",SI:"EU-London",SB:"SG-Singapore",SO:"EU-London",ZA:"EU-London",SS:"EU-London",ES:"EU-London",LK:"JP-Tokyo",SD:"EU-London",SR:"BR-Brazil",SJ:"EU-London",SZ:"EU-London",SE:"EU-London",CH:"EU-London",SY:"EU-London",TW:"JP-Tokyo",TJ:"JP-Tokyo",TZ:"EU-London",TH:"JP-Tokyo",TL:"JP-Tokyo",TG:"EU-London",TK:"SG-Singapore",TO:"SG-Singapore",TT:"US-Atlanta",TN:"EU-London",TR:"TK-Turkey",TM:"JP-Tokyo",TC:"US-Atlanta",TV:"SG-Singapore",UG:"EU-London",UA:"EU-London",AE:"EU-London",GB:"EU-London",US:"US-Atlanta",UM:"SG-Singapore",VI:"US-Atlanta",UY:"BR-Brazil",UZ:"JP-Tokyo",VU:"SG-Singapore",VE:"BR-Brazil",VN:"JP-Tokyo",WF:"SG-Singapore",EH:"EU-London",YE:"JP-Tokyo",ZM:"EU-London",ZW:"EU-London"},oa=0,Da=0,S=null;c.connect=gb;var Fa=500,xc=.875,zc=.75,Ac=.25,yc=.125,Pb=-1,Qb=-1;c.sendMitosis=tb;c.sendEject=Rb;m.networking=function(a){a.loginRealm={GG:"google",FB:"facebook"};a.sendMessage=function(a){if(ca()){var d=a.byteView;if(null!=d){a=U(1+a.length);a.setUint8(0,102);for(var c=0;c<d.length;++c)a.setUint8(1+c,d[c]);V(a)}}};return a}({});var H=null,L=1,Qa=null,mc=0,lc=function(){var a=Date.now(),b=1E3/60;return function(){c.requestAnimationFrame(lc);var d=Date.now(),e=d-a;if(e>b){a=d-e%b;var g=Date.now();!ca()||240>g-Ca||!m.core.config.skipDraw?Tb():console.warn("Skipping draw");Uc();mc=1E3/e;m.debug.updateChart("fps",d,mc)}}}(),ha={},Ib="poland;usa;china;russia;canada;australia;spain;brazil;germany;ukraine;france;sweden;chaplin;north korea;south korea;japan;united kingdom;earth;greece;latvia;lithuania;estonia;finland;norway;cia;maldivas;austria;nigeria;reddit;yaranaika;confederate;9gag;indiana;4chan;italy;bulgaria;tumblr;2ch.hk;hong kong;portugal;jamaica;german empire;mexico;sanik;switzerland;croatia;chile;indonesia;bangladesh;thailand;iran;iraq;peru;moon;botswana;bosnia;netherlands;european union;taiwan;pakistan;hungary;satanist;qing dynasty;matriarchy;patriarchy;feminism;ireland;texas;facepunch;prodota;cambodia;steam;piccolo;ea;india;kc;denmark;quebec;ayy lmao;sealand;bait;tsarist russia;origin;vinesauce;stalin;belgium;luxembourg;stussy;prussia;8ch;argentina;scotland;sir;romania;wojak;doge;nasa;byzantium;imperial japan;french kingdom;somalia;turkey;mars;pokerface;8;irs;receita federal;facebook;putin;merkel;tsipras;obama;kim jong-un;dilma;hollande;berlusconi;cameron;clinton;hillary;venezuela;blatter;chavez;cuba;fidel;merkel;palin;queen;boris;bush;trump".split(";"),Vc="8;nasa;putin;merkel;tsipras;obama;kim jong-un;dilma;hollande;berlusconi;cameron;clinton;hillary;blatter;chavez;fidel;merkel;palin;queen;boris;bush;trump".split(";"),sa={};xb.prototype={$:null,x:0,y:0,f:0,b:0};var Pa=-1,Vb=!1;ba.prototype={id:0,a:null,name:null,i:null,S:null,x:0,y:0,size:0,s:0,u:0,o:0,ja:0,ka:0,g:0,M:0,N:0,J:0,K:0,ea:0,U:0,ra:0,G:!1,c:!1,h:!1,V:!0,da:0,C:null,ia:0,ua:!1,I:!1,ca:function(){var a;for(a=0;a<B.length;a++)if(B[a]==this){B.splice(a,1);break}delete N[this.id];a=q.indexOf(this);-1!=a&&(nb=!0,q.splice(a,1));a=G.indexOf(this.id);-1!=a&&G.splice(a,1);this.G=!0;0<this.da&&aa.push(this)},m:function(){return Math.max(~~(.3*this.size),24)},A:function(a){if(this.name=a)null==this.i?this.i=new Ra(this.m(),"#FFFFFF",!0,"#000000"):this.i.P(this.m()),this.i.B(this.name)},ba:function(){for(var a=this.H();this.a.length>a;){var b=~~(Math.random()*this.a.length);this.a.splice(b,1)}for(0==this.a.length&&0<a&&this.a.push(new xb(this,this.x,this.y,this.size,Math.random()-.5));this.a.length<a;)b=~~(Math.random()*this.a.length),b=this.a[b],this.a.push(new xb(this,b.x,b.y,b.f,b.b))},H:function(){var a=10;20>this.size&&(a=0);this.c&&(a=30);var b=this.size;this.c||(b*=l);b*=L;return~~Math.max(b,a)},Ba:function(){this.ba();for(var a=this.a,b=a.length,d=this,c=this.c?0:(this.id/1E3+x/1E4)%(2*Math.PI),e=0,p=0;p<b;++p){var f=a[(p-1+b)%b].b,k=a[(p+1)%b].b,h=a[p];h.b+=(Math.random()-.5)*(this.h?3:1);h.b*=.7;10<h.b&&(h.b=10);-10>h.b&&(h.b=-10);h.b=(f+k+8*h.b)/10;var n=h.f,f=a[(p-1+b)%b].f,k=a[(p+
1)%b].f;if(15<this.size&&null!=ia&&20<this.size*l&&0<this.id){var Ma=!1,m=h.x,q=h.y;ia.Ea(m-5,q-5,10,10,function(a){a.$!=d&&25>(m-a.x)*(m-a.x)+(q-a.y)*(q-a.y)&&(Ma=!0)});!Ma&&(h.x<Ia||h.y<Ja||h.x>Ka||h.y>La)&&(Ma=!0);Ma&&(0<h.b&&(h.b=0),--h.b)}n+=h.b;0>n&&(n=0);n=this.h?(19*n+this.size)/20:(12*n+this.size)/13;h.f=(f+k+8*n)/10;f=2*Math.PI/b;k=h.f;this.c&&0==p%2&&(k+=5);h.x=this.x+Math.cos(f*p+c)*k;h.y=this.y+Math.sin(f*p+c)*k;e=Math.max(e,k)}this.ia=e},na:function(a,b){this.M=a;this.N=b;this.J=a;this.K=
b;this.ja=a;this.ka=b},T:function(){if(0>=this.id)return 1;var a=$a.pa((x-this.U)/120,0,1);if(this.G&&1<=a){var b=aa.indexOf(this);-1!=b&&aa.splice(b,1)}this.x=a*(this.ja-this.s)+this.s;this.y=a*(this.ka-this.u)+this.u;this.size=a*(this.g-this.o)+this.o;.01>Math.abs(this.size-this.g)&&(this.size=this.g);return a},R:function(){return 0>=this.id?!0:this.x+this.size+40<y-t/2/l||this.y+this.size+40<z-u/2/l||this.x-this.size-40>y+t/2/l||this.y-this.size-40>z+u/2/l?!1:!0},qa:function(a){a.beginPath();var b=
this.H();a.moveTo(this.a[0].x,this.a[0].y);for(var d=1;d<=b;++d){var c=d%b;a.lineTo(this.a[c].x,this.a[c].y)}a.closePath();a.stroke()},w:function(a){if(this.R()){++this.da;var b=0<this.id&&!this.c&&!this.h&&.4>l;5>this.H()&&0<this.id&&(b=!0);if(this.V&&!b)for(var d=0;d<this.a.length;d++)this.a[d].f=this.size;this.V=b;a.save();this.ra=x;d=this.T();this.G&&(a.globalAlpha*=1-d);a.lineWidth=10;a.lineCap="round";a.lineJoin=this.c?"miter":"round";var e=this.name.toLowerCase(),g=null,p=null,d=!1,f=this.color,h=!1;this.h||!Xa||lb||(-1!=Ib.indexOf(e)?(ha.hasOwnProperty(e)||(ha[e]=new Image,ha[e].src=c.ASSETS_ROOT+"skins/"+e+".png"),g=0!=ha[e].width&&ha[e].complete?ha[e]:null):g=null,null!=g?-1!=Vc.indexOf(e)&&(d=!0):(this.I&&"%starball"==this.C&&"shenron"==e&&7<=q.length&&(Vb=d=!0,p=$b("%starball1")),g=$b(this.C),null!=g&&(h=!0,f=Ic(this.C)||f)));m.core.debug&&m.debug.showPrediction&&this.I&&(a.strokeStyle="#0000FF",a.beginPath(),a.arc(this.M,this.N,this.size+5,0,2*Math.PI,!1),a.closePath(),a.stroke(),a.strokeStyle="#00FF00",a.beginPath(),a.arc(this.J,this.K,this.size+5,0,2*Math.PI,!1),a.closePath(),a.stroke());ta&&!lb?(a.fillStyle="#FFFFFF",a.strokeStyle="#AAAAAA"):(a.fillStyle=f,a.strokeStyle=f);b?(a.beginPath(),a.arc(this.x,this.y,this.size+5,0,2*Math.PI,!1),a.closePath()):(this.Ba(),this.qa(a));h||a.fill();null!=g&&(this.la(a,g),null!=p&&this.la(a,p,{alpha:Math.sin(.0174*Pa)}));(ta||15<this.size)&&!b&&(a.strokeStyle="#000000",a.globalAlpha*=.1,a.stroke());a.globalAlpha=1;e=-1!=q.indexOf(this);b=~~this.y;0!=this.id&&(fa||e)&&this.name&&this.i&&!d&&(g=this.i,g.B(this.name),g.P(this.m()),d=0>=this.id?1:Math.ceil(10*l)/10,g.ma(d),g=g.O(),p=Math.ceil(g.width/d),f=Math.ceil(g.height/d),a.drawImage(g,~~this.x-~~(p/2),b-~~(f/2),p,f),b+=g.height/2/d+4);0<this.id&&Ya&&(e||0==q.length&&(!this.c||this.h)&&20<this.size)&&(null==this.S&&(this.S=new Ra(this.m()/2,"#FFFFFF",!0,"#000000")),e=this.S,e.P(this.m()/2),e.B(~~(this.size*this.size/100)),d=Math.ceil(10*l)/10,e.ma(d),g=e.O(),p=Math.ceil(g.width/
d),f=Math.ceil(g.height/d),a.drawImage(g,~~this.x-~~(p/2),b-~~(f/2),p,f));a.restore()}},la:function(a,b,d){a.save();a.clip();var c=Math.max(this.size,this.ia);null!=d&&null!=d.alpha&&(a.globalAlpha=d.alpha);a.drawImage(b,this.x-c-5,this.y-c-5,2*c+10,2*c+10);a.restore()}};var $a=function(a){function b(a,b,c){return a<b?b:a>c?c:a}a.ha=function(a,c){var e;e=b(.5,0,1);return a+e*(c-a)};a.pa=b;a.fixed=function(a,b){var c=Math.pow(10,b);return~~(a*c)/c};return a}({});c.Maths=$a;var Ea=function(a){a.L=function(){for(var a=
new Date,c=[a.getMonth()+1,a.getDate(),a.getFullYear()],a=[a.getHours(),a.getMinutes(),a.getSeconds()],e=1;3>e;e++)10>a[e]&&(a[e]="0"+a[e]);return"["+c.join("/")+" "+a.join(":")+"]"};return a}({});c.Utils=Ea;Ra.prototype={F:"",W:"#000000",Y:!1,Z:"#000000",v:16,j:null,X:null,l:!1,D:1,P:function(a){this.v!=a&&(this.v=a,this.l=!0)},ma:function(a){this.D!=a&&(this.D=a,this.l=!0)},B:function(a){a!=this.F&&(this.F=a,this.l=!0)},O:function(){null==this.j&&(this.j=document.createElement("canvas"),this.X=this.j.getContext("2d"));if(this.l){this.l=!1;var a=this.j,b=this.X,c=this.F,e=this.D,g=this.v,f=g+"px Ubuntu";b.font=f;var h=~~(.2*g);a.width=(b.measureText(c).width+6)*e;a.height=(g+h)*e;b.font=f;b.scale(e,e);b.globalAlpha=1;b.lineWidth=3;b.strokeStyle=this.Z;b.fillStyle=this.W;this.Y&&b.strokeText(c,3,g-h/2);b.fillText(c,3,g-h/2)}return this.j}};Date.now||(Date.now=function(){return(new Date).getTime()});(function(){for(var a=["ms","moz","webkit","o"],b=0;b<a.length&&!c.requestAnimationFrame;++b)c.requestAnimationFrame=c[a[b]+"RequestAnimationFrame"],c.cancelAnimationFrame=c[a[b]+"CancelAnimationFrame"]||c[a[b]+"CancelRequestAnimationFrame"];c.requestAnimationFrame||(c.requestAnimationFrame=function(a){return setTimeout(a,1E3/60)},c.cancelAnimationFrame=function(a){clearTimeout(a)})})();var qc={init:function(a){function b(a){a<e&&(a=e);a>f&&(a=f);return~~((a-e)/32)}function c(a){a<g&&(a=g);a>h&&(a=h);return~~((a-g)/32)}var e=a.za,g=a.Aa,f=a.xa,h=a.ya,k=~~((f-e)/32)+1,m=~~((h-g)/32)+1,n=Array(k*m);return{ta:function(a){var e=
b(a.x)+c(a.y)*k;null==n[e]?n[e]=a:Array.isArray(n[e])?n[e].push(a):n[e]=[n[e],a]},Ea:function(a,e,g,f,h){var p=b(a),r=c(e);a=b(a+g);e=c(e+f);if(0>p||p>=k||0>r||r>=m)debugger;for(;r<=e;++r)for(f=p;f<=a;++f)if(g=n[f+r*k],null!=g)if(Array.isArray(g))for(var l=0;l<g.length;l++)h(g[l]);else h(g)}}}},Nb=function(){var a=new ba(0,0,0,32,"#ED1C24",""),b=document.createElement("canvas");b.width=32;b.height=32;var c=b.getContext("2d");return function(){0<q.length&&(a.color=q[0].color,a.A(q[0].name));c.clearRect(0,0,32,32);c.save();c.translate(16,16);c.scale(.4,.4);a.w(c);c.restore();var e=document.getElementById("favicon"),g=e.cloneNode(!0);g.setAttribute("href",b.toDataURL("image/png"));e.parentNode.replaceChild(g,e)}}();e(function(){Nb()});var Sa={context:null,defaultProvider:"facebook",loginIntent:"0",userInfo:{socialToken:null,tokenExpires:"",level:"",xp:"",xpNeeded:"",name:"",picture:"",displayName:"",loggedIn:"0",socialId:""}},h=c.defaultSt=Sa;c.storageInfo=h;c.createDefaultStorage=Kc;c.updateStorage=Ta;e(function(){null!=c.localStorage.storeObjectInfo&&(h=JSON.parse(c.localStorage.storeObjectInfo));"1"==h.loginIntent&&ac(h.context);""==h.userInfo.name&&""==h.userInfo.displayName||bc(h.userInfo)});c.checkLoginStatus=function(){"1"==h.loginIntent&&(Ua(),ac(h.context))};var Ua=function(){c.MC.setProfilePicture(h.userInfo.picture);c.MC.setSocialId(h.userInfo.socialId)};c.logout=function(){h=Sa;delete c.localStorage.storeObjectInfo;c.localStorage.storeObjectInfo=JSON.stringify(Sa);Ta();nc();m.cache.sentGameServerLogin=!1;delete m.cache.login_info;e("#helloContainer").attr("data-logged-in","0");e("#helloContainer").attr("data-has-account-data","0");e(".timer").text("");e("#gPlusShare").hide();e("#fbShare").show();e("#user-id-tag").text("");Q();c.MC.doLogout()};c.toggleSocialLogin=function(){e("#socialLoginContainer").toggle();e("#settings").hide();e("#instructions").hide();yb()};c.toggleSettings=function(){e("#settings").toggle();e("#socialLoginContainer").hide();e("#instructions").hide();yb()};m.account=function(a){function b(){}
function d(a,b){console.log(Ea.L()+" got user login");if(null==f||f.id!=b.id)f=b,c.ssa_json.applicationUserId=""+b.id,c.ssa_json.custom_user_id=""+b.id,"undefined"!=typeof SSA_CORE&&SSA_CORE.start(),e("#offerwallIframe").attr("src","http://www.supersonicads.com/delivery/panel.php?applicationKey="+EnvConfig.supersonic_app_key+"&applicationUserId="+b.id+"&custom_user_id="+b.id+"&applicationUserIdSignature=optional")}var f=null;a.init=function(){m.core.bind("user_login",d);m.core.bind("user_logout",b)};a.setUserData=function(a){bc(a)};a.setAccountData=function(a,b){var c=e("#helloContainer").attr("data-has-account-data","1");h.userInfo.xp=a.xp;h.userInfo.xpNeeded=a.xpNeeded;h.userInfo.level=a.level;Ta();c&&b?ga(a):(e(".agario-profile-panel .progress-bar-star").text(a.level),e(".agario-exp-bar .progress-bar-text").text(a.xp+"/"+a.xpNeeded+" XP"),e(".agario-exp-bar .progress-bar").css("width",(88*a.xp/a.xpNeeded).toFixed(2)+"%"))};a.Ga=function(a){ga(a)};return a}({});var dc=0;c.fbAsyncInit=function(){function a(){null==c.FB?alert("You seem to have something blocking Facebook on your browser, please check for any extensions"):(h.loginIntent="1",c.updateStorage(),c.FB.login(function(a){cc(a)},{scope:"public_profile, email"}))}c.FB.init({appId:EnvConfig.fb_app_id,cookie:!0,xfbml:!0,status:!0,version:"v2.2"});("1"==c.storageInfo.loginIntent&&"facebook"==c.storageInfo.context||ic)&&c.FB.getLoginStatus(function(b){"connected"===b.status?cc(b):"not_authorized"===b.status?(c.logout(),a()):c.logout()});c.facebookRelogin=a;c.facebookLogin=a};var Db=!1;(function(a){function b(){var a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src="//apis.google.com/js/client:platform.js?onload=gapiAsyncInit";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b);f=!0}var d={},f=!1;c.gapiAsyncInit=function(){e(d).trigger("initialized")};a.google={va:function(){b()},sa:function(a,b){c.gapi.client.load("plus","v1",function(){console.log("fetching me profile");gapi.client.plus.people.get({userId:"me"}).execute(function(a){b(a)})})}};a.Da=function(a){f||b();"undefined"!==typeof gapi?a():e(d).bind("initialized",a)};return a})(m);var Wc=function(a){function b(a){c.MC.doLoginWithGPlus(a);m.cache.login_info=[a,"google"]}function d(a){h.userInfo.picture=a;e(".agario-profile-picture").attr("src",a)}var f=null,g={client_id:EnvConfig.gplus_client_id,cookie_policy:"single_host_origin",scope:"profile email"};a.fa={oa:function(){return f},init:function(){var a=this,b=h&&"1"==h.loginIntent&&"google"==h.context;m.Da(function(){c.gapi.ytsubscribe.go("agarYoutube");c.gapi.load("auth2",function(){f=c.gapi.auth2.init(g);f.attachClickHandler(document.getElementById("gplusLogin"),{},function(a){console.log("googleUser : "+a)},function(a){console.log("failed to login in google plus: ",JSON.stringify(a,void 0,2))});f.currentUser.listen(_.bind(a.Ca,a));b&&1==f.isSignedIn.get()&&f.signIn()})})},Ca:function(a){if(f&&a&&f.isSignedIn.get()&&!Db){Db=!0;h.loginIntent="1";var e=a.getAuthResponse(),g=e.access_token;c.oa=e;console.log("loggedIn with G+!");var l=a.getBasicProfile();a=l.getImageUrl();void 0==a?m.google.sa(e,function(a){a.result.isPlusUser?(a&&d(a.image.url),b(g),a&&(h.userInfo.picture=a.image.url),h.userInfo.socialId=l.getId(),Ua()):(alert("Please add Google+ to your Google account and try again.\nOr you can login with another account."),c.logout())}):(d(a),h.userInfo.picture=a,h.userInfo.socialId=l.getId(),Ua(),b(g));h.context="google";c.updateStorage()}},wa:function(){f&&(f.signOut(),Db=!1)}};return a}(m);c.gplusModule=Wc;var nc=function(){m.fa.wa()};c.logoutGooglePlus=nc;var Uc=function(){function a(a,b,c,d,e){var f=b.getContext("2d"),g=b.width;b=b.height;a.color=e;a.A(c);a.size=d;f.save();f.translate(g/2,b/2);a.w(f);f.restore()}for(var b=new ba(-1,0,0,32,"#5bc0de",""),c=new ba(-1,0,0,32,"#5bc0de",""),f="#0791ff #5a07ff #ff07fe #ffa507 #ff0774 #077fff #3aff07 #ff07ed #07a8ff #ff076e #3fff07 #ff0734 #07ff20 #ff07a2 #ff8207 #07ff0e".split(" "),g=[],h=0;h<f.length;++h){var l=h/f.length*12,k=30*Math.sqrt(h/f.length);g.push(new ba(-1,Math.cos(l)*k,Math.sin(l)*k,10,f[h],""))}Jc(g);var m=document.createElement("canvas");m.getContext("2d");m.width=m.height=70;a(c,m,"",26,"#ebc0de");return function(){e(".cell-spinner").filter(":visible").each(function(){var c=e(this),d=Date.now(),f=this.width,g=this.height,h=this.getContext("2d");h.clearRect(0,0,f,g);h.save();h.translate(f/2,g/2);for(var k=0;10>k;++k)h.drawImage(m,(.1*d+80*k)%(f+140)-f/2-70-35,g/2*Math.sin((.001*d+k)%Math.PI*2)-35,70,70);h.restore();(c=c.attr("data-itr"))&&(c=R(c));a(b,this,c||"",+e(this).attr("data-size"),"#5bc0de")});e("#statsPellets").filter(":visible").each(function(){e(this);var b=this.width,c=this.height;this.getContext("2d").clearRect(0,0,b,c);for(b=0;b<g.length;b++)a(g[b],this,"",g[b].size,g[b].color)})}}();c.createParty=function(){ka(":party");S=function(a){zb("/#"+c.encodeURIComponent(a));e(".partyToken").val("agar.io/#"+c.encodeURIComponent(a));e("#helloContainer").attr("data-party-state","1")};Q()};c.joinParty=ec;c.cancelParty=function(){zb("/");e("#helloContainer").attr("data-party-state","0");ka("");Q()};var E=[],pb=0,qb="#000000",Z=!1,Ba=!1,Na=0,Ab=0,sb=0,rb=0,W=0,Va=!0;c.onPlayerDeath=Ob;setInterval(function(){Ba&&E.push(Wb()/100)},1E3/60);setInterval(function(){var a=Mc();0!=a&&(++sb,0==W&&(W=a),W=Math.min(W,a))},1E3);c.closeStats=function(){Z=!1;e("#stats").hide();c.destroyAd(c.adSlots.ab);Aa(0)};c.setSkipStats=function(a){Va=!a};c.getStatsString=gc;c.gPlusShare=Oc;c.twitterShareStats=function(){var a=c.getStatsString("tt_share_stats");c.open("https://twitter.com/intent/tweet?text="+
a,"Agar.io","width=660,height=310,menubar=no,toolbar=no,resizable=yes,scrollbars=no,left="+(c.screenX+c.innerWidth/2-330)+",top="+(c.innerHeight-310)/2)};c.fbShareStats=function(){var a=c.getStatsString("fb_matchresults_subtitle");c.FB.ui({method:"feed",display:"iframe",name:R("fb_matchresults_title"),caption:R("fb_matchresults_description"),description:a,link:"http://agar.io",Ja:"http://static2.miniclipcdn.com/mobile/agar/Agar.io_matchresults_fb_1200x630.png",Fa:{name:"play now!",link:"http://agar.io"}})};
c.fillSocialValues=function(a,b){1==c.isChrome&&"google"==c.storageInfo.context&&c.gapi.interactivepost.render(b,{contenturl:EnvConfig.game_url,clientid:EnvConfig.gplus_client_id,cookiepolicy:"http://agar.io",prefilltext:a,calltoactionlabel:"BEAT",calltoactionurl:EnvConfig.game_url})};e(function(){"MAsyncInit"in c&&c.MAsyncInit()})}}}})(window,window.jQuery);