(function(f,g){function Ra(){ka=!0;ya();setInterval(ya,18E4);A=la=document.getElementById("canvas");e=A.getContext("2d");A.onmousedown=function(a){if(za){var b=a.clientX-(5+n/5/2),c=a.clientY-(5+n/5/2);if(Math.sqrt(b*b+c*c)<=n/5/2){J();B(17);return}}S=a.clientX;T=a.clientY;ma();J()};A.onmousemove=function(a){S=a.clientX;T=a.clientY;ma()};A.onmouseup=function(a){};/firefox/i.test(navigator.userAgent)?document.addEventListener("DOMMouseScroll",Aa,!1):document.body.onmousewheel=Aa;var a=!1,b=!1,c=!1;f.onkeydown=function(d){32!=d.keyCode||a||(J(),B(17),a=!0);81!=d.keyCode||b||(B(18),b=!0);87!=d.keyCode||c||(J(),B(21),c=!0);27==d.keyCode&&Ba(!0)};f.onkeyup=function(d){32==d.keyCode&&(a=!1);87==d.keyCode&&(c=!1);81==d.keyCode&&b&&(B(19),b=!1)};f.onblur=function(){B(19);c=b=a=!1};f.onresize=Ca;Ca();f.requestAnimationFrame?f.requestAnimationFrame(Da):setInterval(na,1E3/60);setInterval(J,40);u&&g("#region").val(u);Ea();U(g("#region").val());null==m&&u&&V();g("#overlays").show()}function Aa(a){C*=Math.pow(.9,a.wheelDelta/-120||a.detail||0);1>C&&(C=1);C>4/l&&(C=4/l)}function Sa(){if(.1>l)K=null;else{for(var a=Number.POSITIVE_INFINITY,b=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,d=Number.NEGATIVE_INFINITY,e=0,p=0;p<q.length;p++)q[p].shouldRender()&&!q[p].wasSimpleDrawing&&(e=Math.max(q[p].size,e),a=Math.min(q[p].x,a),b=Math.min(q[p].y,b),c=Math.max(q[p].x,c),d=Math.max(q[p].y,d));K=QUAD.init({minX:a-(e+100),minY:b-(e+100),maxX:c+(e+100),maxY:d+(e+100)});for(p=0;p<q.length;p++)if(a=q[p],a.shouldRender())for(b=0;b<a.points.length;++b)K.insert(a.points[b])}}function ma(){W=(S-n/2)/l+s;X=(T-r/2)/l+t}function ya(){null==Y&&(Y={},g("#region").children().each(function(){var a=g(this),b=a.val();b&&(Y[b]=a.text())}));g.get(Z+"//m.agar.io/info",function(a){var b={},c;for(c in a.regions){var d=c.split(":")[0];b[d]=b[d]||0;b[d]+=a.regions[c].numPlayers}for(c in b)g('#region option[value="'+c+'"]').text(Y[c]+" ("+b[c]+" players)")},"json")}function Fa(){g("#adsBottom").hide();g("#overlays").hide();Ea()}function U(a){a&&
a!=u&&(g("#region").val()!=a&&g("#region").val(a),u=f.localStorage.location=a,g(".region-message").hide(),g(".region-message."+a).show(),g(".btn-needs-server").prop("disabled",!1),ka&&V())}function Ba(a){D=null;g("#overlays").fadeIn(a?200:3E3);a||g("#adsBottom").fadeIn(3E3)}function Ea(){g("#region").val()?f.localStorage.location=g("#region").val():f.localStorage.location&&g("#region").val(f.localStorage.location);g("#region").val()?g("#locationKnown").append(g("#region")):g("#locationUnknown").append(g("#region"))}
function oa(){console.log("Find "+u+L);g.ajax(Z+"//m.agar.io/",{error:function(){setTimeout(oa,1E3)},success:function(a){a=a.split("\n");"45.79.222.79:443"==a[0]?oa():Ga("ws://"+a[0])},dataType:"text",method:"POST",cache:!1,crossDomain:!0,data:u+L||"?"})}function V(){ka&&u&&(g("#connecting").show(),oa())}function Ga(a){if(m){m.onopen=null;m.onmessage=null;m.onclose=null;try{m.close()}catch(b){}m=null}var c=f.location.search.slice(1);/^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+:[0-9]+$/.test(c)&&(a="ws://"+c);Ta&&(a=a.split(":"),a=a[0]+"s://ip-"+a[1].replace(/\./g,"-").replace(/\//g,"")+".tech.agar.io:"+(+a[2]+2E3));E=[];h=[];y={};q=[];G=[];z=[];v=w=null;H=0;console.log("Connecting to "+a);m=new WebSocket(a);m.binaryType="arraybuffer";m.onopen=Ua;m.onmessage=Va;m.onclose=Wa;m.onerror=function(){console.log("socket error")}}function M(a){return new DataView(new ArrayBuffer(a))}function N(a){m.send(a.buffer)}function Ua(a){$=500;g("#connecting").hide();console.log("socket open");a=M(5);a.setUint8(0,254);a.setUint32(1,4,!0);N(a);a=M(5);a.setUint8(0,255);a.setUint32(1,673720360,!0);N(a);Ha()}function Wa(a){console.log("socket close");setTimeout(V,$);$*=1.5}function Va(a){Xa(new DataView(a.data))}function Xa(a){function b(){for(var b="";;){var d=a.getUint16(c,!0);c+=2;if(0==d)break;b+=String.fromCharCode(d)}return b}var c=0;240==a.getUint8(c)&&(c+=5);switch(a.getUint8(c++)){case 16:Ya(a,c);break;case 17:O=a.getFloat32(c,!0);c+=4;P=a.getFloat32(c,!0);c+=4;Q=a.getFloat32(c,!0);c+=4;break;case 20:h=[];E=[];break;case 21:pa=a.getInt16(c,!0);c+=2;qa=a.getInt16(c,!0);c+=2;ra||(ra=!0,aa=pa,ba=qa);break;case 32:E.push(a.getUint32(c,!0));c+=4;break;case 49:if(null!=w)break;var d=a.getUint32(c,!0),c=c+4;z=[];for(var e=0;e<d;++e){var p=a.getUint32(c,!0),c=c+4;z.push({id:p,name:b()})}Ia();break;case 50:w=[];d=a.getUint32(c,!0);c+=4;for(e=0;e<d;++e)w.push(a.getFloat32(c,!0)),c+=4;Ia();break;case 64:ca=a.getFloat64(c,!0),c+=8,da=a.getFloat64(c,!0),c+=8,ea=a.getFloat64(c,!0),c+=8,fa=a.getFloat64(c,!0),c+=8,O=(ea+ca)/2,P=(fa+da)/2,Q=1,0==h.length&&(s=O,t=P,l=Q)}}function Ya(a,b){F=+new Date;var c=Math.random();sa=!1;var d=a.getUint16(b,!0);b+=2;for(var e=0;e<d;++e){var p=y[a.getUint32(b,!0)],f=y[a.getUint32(b+4,!0)];b+=8;p&&f&&(f.destroy(),f.ox=f.x,f.oy=f.y,f.oSize=f.size,f.nx=p.x,f.ny=p.y,f.nSize=f.size,f.updateTime=F)}for(e=0;;){d=a.getUint32(b,!0);b+=4;if(0==d)break;++e;var g,p=a.getInt16(b,!0);b+=2;f=a.getInt16(b,!0);b+=2;g=a.getInt16(b,!0);b+=2;for(var l=a.getUint8(b++),n=a.getUint8(b++),q=a.getUint8(b++),
l=(l<<16|n<<8|q).toString(16);6>l.length;)l="0"+l;var l="#"+l,k=a.getUint8(b++),n=!!(k&1),q=!!(k&16);k&2&&(b+=4);k&4&&(b+=8);k&8&&(b+=16);for(var m,k="";;){m=a.getUint16(b,!0);b+=2;if(0==m)break;k+=String.fromCharCode(m)}m=k;k=null;y.hasOwnProperty(d)?(k=y[d],k.updatePos(),k.ox=k.x,k.oy=k.y,k.oSize=k.size,k.color=l):(k=new Ja(d,p,f,g,l,m),k.pX=p,k.pY=f);k.isVirus=n;k.isAgitated=q;k.nx=p;k.ny=f;k.nSize=g;k.updateCode=c;k.updateTime=F;m&&k.setName(m);-1!=E.indexOf(d)&&-1==h.indexOf(k)&&(document.getElementById("overlays").style.display="none",h.push(k),1==h.length&&(s=k.x,t=k.y))}c=a.getUint32(b,!0);b+=4;for(e=0;e<c;e++)d=a.getUint32(b,!0),b+=4,k=y[d],null!=k&&k.destroy();sa&&0==h.length&&Ba(!1)}function J(){var a;if(ta()){a=S-n/2;var b=T-r/2;64>a*a+b*b||.01>Math.abs(Ka-W)&&.01>Math.abs(La-X)||(Ka=W,La=X,a=M(21),a.setUint8(0,16),a.setFloat64(1,W,!0),a.setFloat64(9,X,!0),a.setUint32(17,0,!0),N(a))}}function Ha(){if(ta()&&null!=D){var a=M(1+2*D.length);a.setUint8(0,0);for(var b=0;b<D.length;++b)a.setUint16(1+2*b,D.charCodeAt(b),!0);N(a)}}function ta(){return null!=m&&m.readyState==m.OPEN}function B(a){if(ta()){var b=M(1);b.setUint8(0,a);N(b)}}function Da(){na();f.requestAnimationFrame(Da)}function Ca(){n=f.innerWidth;r=f.innerHeight;la.width=A.width=n;la.height=A.height=r;na()}function Ma(){var a;a=1*Math.max(r/1080,n/1920);return a*=C}function Za(){if(0!=h.length){for(var a=0,b=0;b<h.length;b++)a+=h[b].size;a=Math.pow(Math.min(64/a,1),.4)*Ma();l=(9*l+a)/10}}function na(){var a,b,c=+new Date;++$a;F=+new Date;if(0<h.length){Za();
for(var d=a=b=0;d<h.length;d++)h[d].updatePos(),b+=h[d].x/h.length,a+=h[d].y/h.length;O=b;P=a;Q=l;s=(s+b)/2;t=(t+a)/2}else s=(29*s+O)/30,t=(29*t+P)/30,l=(9*l+Q*Ma())/10;Sa();ma();ua||e.clearRect(0,0,n,r);if(ua)e.fillStyle=ga?"#111111":"#F2FBFF",e.globalAlpha=.05,e.fillRect(0,0,n,r),e.globalAlpha=1;else{e.fillStyle=ga?"#111111":"#F2FBFF";e.fillRect(0,0,n,r);e.save();e.strokeStyle=ga?"#AAAAAA":"#000000";e.globalAlpha=.2;e.scale(l,l);b=n/l;a=r/l;for(d=-.5+(-s+b/2)%50;d<b;d+=50)e.beginPath(),e.moveTo(d,
0),e.lineTo(d,a),e.stroke();for(d=-.5+(-t+a/2)%50;d<a;d+=50)e.beginPath(),e.moveTo(0,d),e.lineTo(b,d),e.stroke();e.restore()}q.sort(function(a,b){return a.size==b.size?a.id-b.id:a.size-b.size});e.save();e.translate(n/2,r/2);e.scale(l,l);e.translate(-s,-t);for(d=0;d<G.length;d++)G[d].draw();for(d=0;d<q.length;d++)q[d].draw();if(ra){aa=(3*aa+pa)/4;ba=(3*ba+qa)/4;e.save();e.strokeStyle="#FFAAAA";e.lineWidth=10;e.lineCap="round";e.lineJoin="round";e.globalAlpha=.5;e.beginPath();for(d=0;d<h.length;d++)e.moveTo(h[d].x,
h[d].y),e.lineTo(aa,ba);e.stroke();e.restore()}e.restore();v&&v.width&&e.drawImage(v,n-v.width-10,10);H=Math.max(H,ab());0!=H&&(null==ha&&(ha=new ia(24,"#FFFFFF")),ha.setValue("Score: "+~~(H/100)),a=ha.render(),b=a.width,e.globalAlpha=.2,e.fillStyle="#000000",e.fillRect(10,r-10-24-10,b+10,34),e.globalAlpha=1,e.drawImage(a,15,r-10-24-5));bb();c=+new Date-c;c>1E3/60?x-=.01:c<1E3/65&&(x+=.01);.4>x&&(x=.4);1<x&&(x=1)}function bb(){if(za&&va.width){var a=n/5;e.drawImage(va,5,5,a,a)}}function ab(){for(var a=0,b=0;b<h.length;b++)a+=h[b].nSize*h[b].nSize;return a}function Ia(){v=null;if(null!=w||0!=z.length)if(null!=w||ja){v=document.createElement("canvas");var a=v.getContext("2d"),b=60,b=null==w?b+24*z.length:b+180,c=Math.min(200,.3*n)/200;v.width=200*c;v.height=b*c;a.scale(c,c);a.globalAlpha=.4;a.fillStyle="#000000";a.fillRect(0,0,200,b);a.globalAlpha=1;a.fillStyle="#FFFFFF";c=null;c="Leaderboard";a.font="30px Ubuntu";a.fillText(c,100-a.measureText(c).width/2,40);if(null==w)for(a.font="20px Ubuntu",
b=0;b<z.length;++b)c=z[b].name||"An unnamed cell",ja||(c="An unnamed cell"),-1!=E.indexOf(z[b].id)?(h[0].name&&(c=h[0].name),a.fillStyle="#FFAAAA"):a.fillStyle="#FFFFFF",c=b+1+". "+c,a.fillText(c,100-a.measureText(c).width/2,70+24*b);else for(b=c=0;b<w.length;++b)angEnd=c+w[b]*Math.PI*2,a.fillStyle=cb[b+1],a.beginPath(),a.moveTo(100,140),a.arc(100,140,80,c,angEnd,!1),a.fill(),c=angEnd}}function Ja(a,b,c,d,e,f){q.push(this);y[a]=this;this.id=a;this.ox=this.x=b;this.oy=this.y=c;this.oSize=this.size=d;this.color=e;this.points=[];this.pointsAcc=[];this.createPoints();this.setName(f)}function ia(a,b,c,d){a&&(this._size=a);b&&(this._color=b);this._stroke=!!c;d&&(this._strokeColor=d)}var Z=f.location.protocol,Ta="https:"==Z,la,e,A,n,r,K=null,m=null,s=0,t=0,E=[],h=[],y={},q=[],G=[],z=[],S=0,T=0,W=-1,X=-1,$a=0,F=0,D=null,ca=0,da=0,ea=1E4,fa=1E4,l=1,u=null,Na=!0,ja=!0,wa=!1,sa=!1,H=0,ga=!1,Oa=!1,O=s=~~((ca+ea)/2),P=t=~~((da+fa)/2),Q=1,L="",w=null,ka=!1,ra=!1,pa=0,qa=0,aa=0,ba=0,Pa=0,cb=["#333333","#FF3333",
"#33FF33","#3333FF"],ua=!1,C=1,za="ontouchstart"in f&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),va=new Image;va.src="img/split.png";var Qa=document.createElement("canvas");if("undefined"==typeof console||"undefined"==typeof DataView||"undefined"==typeof WebSocket||null==Qa||null==Qa.getContext||null==f.localStorage)alert("You browser does not support this game, we recommend you to use Firefox to play this");else{var Y=null;f.setNick=function(a){Fa();D=a;Ha();H=0};f.setRegion=U;f.setSkins=function(a){Na=a};f.setNames=function(a){ja=a};f.setDarkTheme=function(a){ga=a};f.setColors=function(a){wa=a};f.setShowMass=function(a){Oa=a};f.spectate=function(){D=null;B(1);Fa()};f.setGameMode=function(a){a!=L&&(L=a,V())};f.setAcid=function(a){ua=a};null!=f.localStorage&&(null==f.localStorage.AB8&&(f.localStorage.AB8=0+~~(100*Math.random())),Pa=+f.localStorage.AB8,f.ABGroup=Pa);g.get(Z+"//gc.agar.io",function(a){var b=a.split(" ");a=b[0];b=b[1]||"";-1=="DE IL PL HU BR AT UA".split(" ").indexOf(a)&&xa.push("nazi");-1==["UA"].indexOf(a)&&xa.push("ussr");R.hasOwnProperty(a)&&("string"==typeof R[a]?u||U(R[a]):R[a].hasOwnProperty(b)&&(u||U(R[a][b])))},"text");setTimeout(function(){},3E5);var R={AF:"JP-Tokyo",AX:"EU-London",AL:"EU-London",DZ:"EU-London",AS:"SG-Singapore",AD:"EU-London",AO:"EU-London",AI:"US-Atlanta",AG:"US-Atlanta",AR:"BR-Brazil",AM:"JP-Tokyo",AW:"US-Atlanta",AU:"SG-Singapore",AT:"EU-London",AZ:"JP-Tokyo",BS:"US-Atlanta",BH:"JP-Tokyo",BD:"JP-Tokyo",BB:"US-Atlanta",BY:"EU-London",BE:"EU-London",BZ:"US-Atlanta",BJ:"EU-London",BM:"US-Atlanta",BT:"JP-Tokyo",BO:"BR-Brazil",BQ:"US-Atlanta",BA:"EU-London",BW:"EU-London",BR:"BR-Brazil",IO:"JP-Tokyo",VG:"US-Atlanta",BN:"JP-Tokyo",BG:"EU-London",BF:"EU-London",BI:"EU-London",KH:"JP-Tokyo",CM:"EU-London",CA:"US-Atlanta",CV:"EU-London",KY:"US-Atlanta",CF:"EU-London",TD:"EU-London",CL:"BR-Brazil",CN:"CN-China",CX:"JP-Tokyo",CC:"JP-Tokyo",CO:"BR-Brazil",KM:"EU-London",CD:"EU-London",CG:"EU-London",CK:"SG-Singapore",CR:"US-Atlanta",CI:"EU-London",HR:"EU-London",CU:"US-Atlanta",CW:"US-Atlanta",CY:"JP-Tokyo",CZ:"EU-London",DK:"EU-London",DJ:"EU-London",DM:"US-Atlanta",DO:"US-Atlanta",EC:"BR-Brazil",EG:"EU-London",SV:"US-Atlanta",GQ:"EU-London",ER:"EU-London",EE:"EU-London",ET:"EU-London",FO:"EU-London",FK:"BR-Brazil",FJ:"SG-Singapore",FI:"EU-London",FR:"EU-London",GF:"BR-Brazil",PF:"SG-Singapore",GA:"EU-London",GM:"EU-London",GE:"JP-Tokyo",DE:"EU-London",GH:"EU-London",GI:"EU-London",GR:"EU-London",GL:"US-Atlanta",GD:"US-Atlanta",GP:"US-Atlanta",GU:"SG-Singapore",GT:"US-Atlanta",GG:"EU-London",GN:"EU-London",GW:"EU-London",GY:"BR-Brazil",HT:"US-Atlanta",VA:"EU-London",HN:"US-Atlanta",HK:"JP-Tokyo",HU:"EU-London",IS:"EU-London",IN:"JP-Tokyo",ID:"JP-Tokyo",IR:"JP-Tokyo",IQ:"JP-Tokyo",IE:"EU-London",IM:"EU-London",IL:"JP-Tokyo",IT:"EU-London",JM:"US-Atlanta",JP:"JP-Tokyo",JE:"EU-London",JO:"JP-Tokyo",KZ:"JP-Tokyo",KE:"EU-London",KI:"SG-Singapore",KP:"JP-Tokyo",KR:"JP-Tokyo",KW:"JP-Tokyo",KG:"JP-Tokyo",LA:"JP-Tokyo",LV:"EU-London",LB:"JP-Tokyo",LS:"EU-London",LR:"EU-London",LY:"EU-London",LI:"EU-London",LT:"EU-London",LU:"EU-London",MO:"JP-Tokyo",MK:"EU-London",MG:"EU-London",MW:"EU-London",MY:"JP-Tokyo",MV:"JP-Tokyo",ML:"EU-London",MT:"EU-London",MH:"SG-Singapore",MQ:"US-Atlanta",MR:"EU-London",MU:"EU-London",YT:"EU-London",MX:"US-Atlanta",FM:"SG-Singapore",MD:"EU-London",MC:"EU-London",MN:"JP-Tokyo",ME:"EU-London",MS:"US-Atlanta",MA:"EU-London",MZ:"EU-London",MM:"JP-Tokyo",NA:"EU-London",NR:"SG-Singapore",NP:"JP-Tokyo",NL:"EU-London",NC:"SG-Singapore",NZ:"SG-Singapore",NI:"US-Atlanta",NE:"EU-London",NG:"EU-London",NU:"SG-Singapore",NF:"SG-Singapore",MP:"SG-Singapore",NO:"EU-London",OM:"JP-Tokyo",PK:"JP-Tokyo",PW:"SG-Singapore",PS:"JP-Tokyo",PA:"US-Atlanta",PG:"SG-Singapore",PY:"BR-Brazil",PE:"BR-Brazil",PH:"JP-Tokyo",PN:"SG-Singapore",PL:"EU-London",PT:"EU-London",PR:"US-Atlanta",QA:"JP-Tokyo",RE:"EU-London",RO:"EU-London",RU:"RU-Russia",RW:"EU-London",BL:"US-Atlanta",SH:"EU-London",KN:"US-Atlanta",LC:"US-Atlanta",MF:"US-Atlanta",PM:"US-Atlanta",VC:"US-Atlanta",WS:"SG-Singapore",SM:"EU-London",ST:"EU-London",SA:"EU-London",SN:"EU-London",RS:"EU-London",SC:"EU-London",SL:"EU-London",SG:"JP-Tokyo",SX:"US-Atlanta",SK:"EU-London",SI:"EU-London",SB:"SG-Singapore",SO:"EU-London",ZA:"EU-London",SS:"EU-London",ES:"EU-London",LK:"JP-Tokyo",SD:"EU-London",SR:"BR-Brazil",SJ:"EU-London",SZ:"EU-London",SE:"EU-London",CH:"EU-London",SY:"EU-London",TW:"JP-Tokyo",TJ:"JP-Tokyo",TZ:"EU-London",TH:"JP-Tokyo",TL:"JP-Tokyo",TG:"EU-London",TK:"SG-Singapore",TO:"SG-Singapore",TT:"US-Atlanta",TN:"EU-London",TR:"TK-Turkey",TM:"JP-Tokyo",TC:"US-Atlanta",TV:"SG-Singapore",UG:"EU-London",UA:"EU-London",AE:"EU-London",GB:"EU-London",US:{AL:"US-Atlanta",AK:"US-Fremont",AZ:"US-Fremont",AR:"US-Atlanta",CA:"US-Fremont",CO:"US-Fremont",CT:"US-Atlanta",DE:"US-Atlanta",FL:"US-Atlanta",GA:"US-Atlanta",HI:"US-Fremont",ID:"US-Fremont",IL:"US-Atlanta",IN:"US-Atlanta",IA:"US-Atlanta",KS:"US-Atlanta",KY:"US-Atlanta",LA:"US-Atlanta",ME:"US-Atlanta",MD:"US-Atlanta",MA:"US-Atlanta",MI:"US-Atlanta",MN:"US-Fremont",MS:"US-Atlanta",MO:"US-Atlanta",MT:"US-Fremont",NE:"US-Fremont",NV:"US-Fremont",NH:"US-Atlanta",NJ:"US-Atlanta",NM:"US-Fremont",NY:"US-Atlanta",NC:"US-Atlanta",ND:"US-Fremont",OH:"US-Atlanta",OK:"US-Atlanta",OR:"US-Fremont",PA:"US-Atlanta",RI:"US-Atlanta",SC:"US-Atlanta",SD:"US-Fremont",TN:"US-Atlanta",TX:"US-Atlanta",UT:"US-Fremont",VT:"US-Atlanta",VA:"US-Atlanta",WA:"US-Fremont",WV:"US-Atlanta",WI:"US-Atlanta",WY:"US-Fremont",DC:"US-Atlanta",AS:"US-Atlanta",GU:"US-Atlanta",MP:"US-Atlanta",PR:"US-Atlanta",UM:"US-Atlanta",VI:"US-Atlanta"},UM:"SG-Singapore",VI:"US-Atlanta",UY:"BR-Brazil",UZ:"JP-Tokyo",VU:"SG-Singapore",VE:"BR-Brazil",VN:"JP-Tokyo",WF:"SG-Singapore",EH:"EU-London",YE:"JP-Tokyo",ZM:"EU-London",ZW:"EU-London"};f.connect=Ga;var $=500,Ka=-1,La=-1,v=null,x=1,ha=null,I={},xa="poland;usa;china;russia;canada;australia;spain;brazil;germany;ukraine;france;sweden;hitler;north korea;south korea;japan;united kingdom;earth;greece;latvia;lithuania;estonia;finland;norway;cia;maldivas;austria;nigeria;reddit;yaranaika;confederate;9gag;indiana;4chan;italy;bulgaria;tumblr;2ch.hk;hong kong;portugal;jamaica;german empire;mexico;sanik;switzerland;croatia;chile;indonesia;bangladesh;thailand;iran;iraq;peru;moon;botswana;bosnia;netherlands;european union;taiwan;pakistan;hungary;satanist;qing dynasty;matriarchy;patriarchy;feminism;ireland;texas;facepunch;prodota;cambodia;steam;piccolo;ea;india;kc;denmark;quebec;ayy lmao;sealand;bait;tsarist russia;origin;vinesauce;stalin;belgium;luxembourg;stussy;prussia;8ch;argentina;scotland;sir;romania;belarus;wojak;doge;nasa;byzantium;imperial japan;french kingdom;somalia;turkey;mars;pokerface;8;irs;receita federal".split(";"),db=["8","nasa"],eb=["m'blob"];Ja.prototype={id:0,points:null,pointsAcc:null,name:null,nameCache:null,sizeCache:null,x:0,y:0,size:0,ox:0,oy:0,oSize:0,nx:0,ny:0,nSize:0,updateTime:0,updateCode:0,drawTime:0,destroyed:!1,isVirus:!1,isAgitated:!1,wasSimpleDrawing:!0,destroy:function(){var a;for(a=0;a<q.length;a++)if(q[a]==this){q.splice(a,1);break}delete y[this.id];a=h.indexOf(this);-1!=a&&(sa=!0,h.splice(a,1));a=E.indexOf(this.id);-1!=a&&E.splice(a,1);this.destroyed=!0;G.push(this)},getNameSize:function(){return Math.max(~~(.3*this.size),24)},setName:function(a){if(this.name=a)null==this.nameCache?this.nameCache=new ia(this.getNameSize(),"#FFFFFF",!0,"#000000"):this.nameCache.setSize(this.getNameSize()),this.nameCache.setValue(this.name)},createPoints:function(){for(var a=this.getNumPoints();this.points.length>a;){var b=~~(Math.random()*this.points.length);this.points.splice(b,1);this.pointsAcc.splice(b,1)}0==this.points.length&&0<a&&(this.points.push({c:this,v:this.size,x:this.x,y:this.y}),this.pointsAcc.push(Math.random()-.5));for(;this.points.length<a;){var b=~~(Math.random()*this.points.length),c=this.points[b];this.points.splice(b,0,{c:this,v:c.v,x:c.x,y:c.y});this.pointsAcc.splice(b,0,this.pointsAcc[b])}},getNumPoints:function(){var a=10;20>this.size&&(a=0);this.isVirus&&(a=30);var b=this.size;this.isVirus||(b*=l);b*=x;return~~Math.max(b,a)},movePoints:function(){this.createPoints();for(var a=this.points,b=this.pointsAcc,c=a.length,d=0;d<c;++d){var e=b[(d-1+c)%c],f=b[(d+1)%c];b[d]+=(Math.random()-.5)*(this.isAgitated?3:1);b[d]*=.7;10<b[d]&&(b[d]=10);-10>b[d]&&(b[d]=-10);b[d]=(e+f+8*b[d])/10}for(var l=this,g=this.isVirus?0:(this.id/1E3+F/1E4)%(2*Math.PI),d=0;d<c;++d){var h=a[d].v,e=a[(d-1+c)%c].v,f=a[(d+1)%c].v;if(15<this.size&&null!=K){var m=!1,n=a[d].x,k=a[d].y;K.retrieve2(n-5,k-5,10,10,function(a){a.c!=l&&25>(n-a.x)*(n-a.x)+(k-a.y)*(k-a.y)&&(m=!0)});!m&&(a[d].x<ca||a[d].y<da||a[d].x>ea||a[d].y>fa)&&(m=!0);m&&(0<b[d]&&(b[d]=0),b[d]-=1)}h+=b[d];0>h&&(h=0);h=this.isAgitated?(19*h+this.size)/20:(12*h+this.size)/
13;a[d].v=(e+f+8*h)/10;e=2*Math.PI/c;f=this.points[d].v;this.isVirus&&0==d%2&&(f+=5);a[d].x=this.x+Math.cos(e*d+g)*f;a[d].y=this.y+Math.sin(e*d+g)*f}},updatePos:function(){var a;a=(F-this.updateTime)/120;a=0>a?0:1<a?1:a;var b=0>a?0:1<a?1:a;this.getNameSize();if(this.destroyed&&1<=b){var c=G.indexOf(this);-1!=c&&G.splice(c,1)}this.x=a*(this.nx-this.ox)+this.ox;this.y=a*(this.ny-this.oy)+this.oy;this.size=b*(this.nSize-this.oSize)+this.oSize;return b},shouldRender:function(){return this.x+this.size+
40<s-n/2/l||this.y+this.size+40<t-r/2/l||this.x-this.size-40>s+n/2/l||this.y-this.size-40>t+r/2/l?!1:!0},draw:function(){if(this.shouldRender()){var a=!this.isVirus&&!this.isAgitated&&.1>l;5>this.getNumPoints()&&(a=!0);if(this.wasSimpleDrawing&&!a)for(var b=0;b<this.points.length;b++)this.points[b].v=this.size;this.wasSimpleDrawing=a;e.save();this.drawTime=F;b=this.updatePos();this.destroyed&&(e.globalAlpha*=1-b);e.lineWidth=10;e.lineCap="round";e.lineJoin=this.isVirus?"mitter":"round";wa?(e.fillStyle="#FFFFFF",e.strokeStyle="#AAAAAA"):(e.fillStyle=this.color,e.strokeStyle=this.color);if(a)e.beginPath(),e.arc(this.x,this.y,this.size,0,2*Math.PI,!1);else{this.movePoints();e.beginPath();var c=this.getNumPoints();e.moveTo(this.points[0].x,this.points[0].y);for(b=1;b<=c;++b){var d=b%c;e.lineTo(this.points[d].x,this.points[d].y)}}e.closePath();c=this.name.toLowerCase();!this.isAgitated&&Na&&""==L?-1!=xa.indexOf(c)?(I.hasOwnProperty(c)||(I[c]=new Image,I[c].src="skins/"+c+".png"),b=0!=I[c].width&&I[c].complete?I[c]:null):b=null:b=null;b=(d=b)?-1!=eb.indexOf(c):!1;a||e.stroke();e.fill();null==d||b||(e.save(),e.clip(),e.drawImage(d,this.x-this.size,this.y-this.size,2*this.size,2*this.size),e.restore());(wa||15<this.size)&&!a&&(e.strokeStyle="#000000",e.globalAlpha*=.1,e.stroke());e.globalAlpha=1;null!=d&&b&&e.drawImage(d,this.x-2*this.size,this.y-2*this.size,4*this.size,4*this.size);b=-1!=h.indexOf(this);a=~~this.y;if((ja||b)&&this.name&&this.nameCache&&(null==d||-1==db.indexOf(c))){d=this.nameCache;d.setValue(this.name);d.setSize(this.getNameSize());c=Math.ceil(10*l)/10;d.setScale(c);var d=d.render(),f=~~(d.width/c),g=~~(d.height/c);e.drawImage(d,~~this.x-~~(f/2),a-~~(g/2),f,g);a+=d.height/2/c+4}Oa&&(b||0==h.length&&(!this.isVirus||this.isAgitated)&&20<this.size)&&(null==this.sizeCache&&(this.sizeCache=new ia(this.getNameSize()/2,"#FFFFFF",!0,"#000000")),b=this.sizeCache,b.setSize(this.getNameSize()/2),b.setValue(~~(this.size*this.size/100)),c=Math.ceil(10*l)/10,b.setScale(c),d=b.render(),f=~~(d.width/c),g=~~(d.height/
c),e.drawImage(d,~~this.x-~~(f/2),a-~~(g/2),f,g));e.restore()}}};ia.prototype={_value:"",_color:"#000000",_stroke:!1,_strokeColor:"#000000",_size:16,_canvas:null,_ctx:null,_dirty:!1,_scale:1,setSize:function(a){this._size!=a&&(this._size=a,this._dirty=!0)},setScale:function(a){this._scale!=a&&(this._scale=a,this._dirty=!0)},setColor:function(a){this._color!=a&&(this._color=a,this._dirty=!0)},setStroke:function(a){this._stroke!=a&&(this._stroke=a,this._dirty=!0)},setStrokeColor:function(a){this._strokeColor!=a&&(this._strokeColor=a,this._dirty=!0)},setValue:function(a){a!=this._value&&(this._value=a,this._dirty=!0)},render:function(){null==this._canvas&&(this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d"));if(this._dirty){this._dirty=!1;var a=this._canvas,b=this._ctx,c=this._value,d=this._scale,e=this._size,f=e+"px Ubuntu";b.font=f;var g=b.measureText(c).width,h=~~(.2*e);a.width=(g+6)*d;a.height=(e+h)*d;b.font=f;b.scale(d,d);b.globalAlpha=1;b.lineWidth=3;b.strokeStyle=this._strokeColor;b.fillStyle=this._color;this._stroke&&b.strokeText(c,3,e-h/2);b.fillText(c,3,e-h/2)}return this._canvas}};f.onload=Ra}})(window,jQuery);